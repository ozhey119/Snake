{"version":3,"sources":["customHooks.js","Scores.js","App.js","reportWebVitals.js","index.js"],"names":["getWindowDimensions","window","width","innerWidth","height","innerHeight","Scores","gameState","scores","Object","values","snakes","map","snake","style","backgroundColor","color","className","score","App","options","currentSnakeColor","gameResult","canvasRef","useRef","useState","setGameState","scale","canvas","setCanvas","roomName","setRoomName","mode","setMode","roomInput","setRoomInput","winner","setWinner","socketRef","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","useWindowDimensions","swipeHandlers","useSwipeable","onSwipedLeft","handleKeyDown","key","onSwipedRight","onSwipedUp","onSwipedDown","reset","current","socketIOClient","on","console","log","state","keys","length","hasOwnProperty","lastSurvivor","initCanvas","maxWidth","Math","min","multiplier","disconnect","initBlankCanvas","useCallback","context","getContext","fillStyle","fillRect","prevCanvas","setTransform","apple","forEach","body","segment","x","y","beginPath","arc","PI","closePath","fill","e","emit","preventDefault","handleJoinRoom","room","id","margin","onClick","type","placeholder","onChange","target","value","role","tabIndex","onKeyDown","gameBoard","display","ref","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.269f973c.chunk.js","sourcesContent":["// Custom Hook by Dan Abramov\r\nimport { useEffect, useState, useRef } from 'react';\r\n\r\nexport function useInterval(callback, delay) {\r\n  const savedCallback = useRef();\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      let id = setInterval(tick, delay);\r\n      return () => clearInterval(id);\r\n    }\r\n  }, [delay]);\r\n}\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nexport function useWindowDimensions() {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}","import React from \"react\";\r\nimport './App.css'\r\n\r\nconst Scores = ({ gameState }) => {\r\n    if (!gameState) {\r\n        return null;\r\n    }\r\n    const scores = Object.values(gameState.snakes).map((snake) =>\r\n        <div key={snake.color} style={{ backgroundColor: snake.color }} className='score-item'>{snake.score}</div>)\r\n\r\n    return (\r\n        <>\r\n            <h2 className='text-shadow'>Scores:</h2>\r\n            <div className='flex-scores'>\r\n                {scores}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Scores;","import React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport { useSwipeable } from \"react-swipeable\";\nimport { useWindowDimensions } from './customHooks';\nimport Scores from './Scores';\nimport './App.css'\nconst MAX_WINDOW_WIDTH = 600; //The true maximum width is around 80% of the const value\n\nconst App = () => {\n    const canvasRef = useRef(null)\n    const [gameState, setGameState] = useState();\n    const [canvas, setCanvas] = useState({ width: 480, height: 480, color: \"oldlace\", scale: 20 })\n    const [roomName, setRoomName] = useState();\n    const [mode, setMode] = useState();\n    const [roomInput, setRoomInput] = useState('');\n    const [winner, setWinner] = useState();\n    const socketRef = useRef();\n    const { height, width } = useWindowDimensions();\n    let options, gameBoard, currentSnakeColor, gameResult;\n\n    const swipeHandlers = useSwipeable({\n        onSwipedLeft: () => handleKeyDown({ key: \"ArrowLeft\" }),\n        onSwipedRight: () => handleKeyDown({ key: \"ArrowRight\" }),\n        onSwipedUp: () => handleKeyDown({ key: \"ArrowUp\" }),\n        onSwipedDown: () => handleKeyDown({ key: \"ArrowDown\" })\n    });\n\n    const reset = () => {\n        setRoomName();\n        setGameState();\n        setWinner();\n        setMode();\n        setWinner();\n    }\n\n    useEffect(() => {\n        socketRef.current = socketIOClient(\"https://lit-caverns-07351.herokuapp.com\");\n        socketRef.current.on('connect', function () {\n            console.log('connected')\n        });\n        socketRef.current.on('disconnect', function () {\n            console.log('disconnected')\n            reset();\n        });\n        socketRef.current.on('gameState', (state) => {\n            setGameState(state);\n        })\n        socketRef.current.on('gameEnd', (state) => {\n            if (Object.keys(state.snakes).length > 1) {\n                if (state.hasOwnProperty('lastSurvivor') && Object.keys(state.snakes).length > 1) {\n                    setWinner(state.lastSurvivor);\n                } else {\n                    setWinner('Tie');\n                }\n            }\n        })\n        socketRef.current.on('initGame', (initCanvas) => {\n            setWinner();\n            const maxWidth = Math.min(window.innerWidth, MAX_WINDOW_WIDTH);\n            const multiplier = initCanvas.width / maxWidth;\n            setCanvas({\n                width: maxWidth * 0.8,\n                height: initCanvas.height / multiplier * 0.8,\n                color: initCanvas.color,\n                scale: initCanvas.scale / multiplier * 0.8\n            })\n        })\n        socketRef.current.on('joinedRoom', (roomName) => {\n            setRoomName(roomName);\n        })\n        socketRef.current.on('leftRoom', () => {\n            reset();\n        })\n        return () => socketRef.current.disconnect();\n    }, []);\n\n    const initBlankCanvas = useCallback(\n        () => {\n            const context = canvasRef.current.getContext(\"2d\");\n            context.fillStyle = canvas.color;\n            context.fillRect(0, 0, canvas.width, canvas.height);\n            return context;\n        },\n        [canvas],\n    );\n\n    useEffect(() => {\n        setCanvas(prevCanvas => {\n            const maxWidth = Math.min(width, MAX_WINDOW_WIDTH);\n            const multiplier = prevCanvas.width / maxWidth;\n            return {\n                width: maxWidth * 0.8,\n                height: prevCanvas.height / multiplier * 0.8,\n                color: prevCanvas.color,\n                scale: prevCanvas.scale / multiplier * 0.8\n            }\n        })\n    }, [width, height])\n\n    useEffect(() => {\n        const context = initBlankCanvas();\n        context.setTransform(canvas.scale, 0, 0, canvas.scale, 0, 0);\n    }, [canvas, initBlankCanvas, mode])\n\n    useEffect(() => {\n        if (gameState) {\n            const { snakes, apple } = gameState;\n            const context = initBlankCanvas();\n            Object.values(snakes).forEach(snake => {\n                context.fillStyle = snake.color;\n                snake.body.forEach((segment) => context.fillRect(segment.x, segment.y, 1, 1))\n            })\n            context.fillStyle = 'red';\n            context.beginPath();\n            context.arc(apple.x + 0.5, apple.y + 0.575, 0.425, 0, 2 * Math.PI);\n            context.closePath();\n            context.fill();\n            context.fillStyle = 'green';\n            context.fillRect(apple.x + 0.5, apple.y, 0.3, 0.15);\n        }\n    }, [gameState, canvas, initBlankCanvas])\n\n    const handleKeyDown = (e) => {\n        if (e.key === \" \") {\n            socketRef.current.emit('newGame', roomName, mode)\n        } else {\n            if (e.preventDefault && (e.key === 'ArrowUp' || e.key === 'ArrowDown' || e.key === 'ArrowLeft' || e.key === 'ArrowRight')) {\n                e.preventDefault();\n            }\n            socketRef.current.emit('keyDown', e.key, roomName)\n        }\n    }\n\n    const handleJoinRoom = (room, mode) => {\n        setMode(mode);\n        socketRef.current.emit('joinRoom', room, mode);\n    }\n\n    if (mode === 'room' && gameState && gameState.snakes[socketRef.current.id]) {\n        currentSnakeColor = <h2 style={{ margin: '10px 0px -15px' }} className='text-shadow'>Your color is <span style={{ color: gameState.snakes[socketRef.current.id].color }}>{gameState.snakes[socketRef.current.id].color}</span></h2>\n    }\n\n    if (roomName) { // Player entered a room or chose local mode\n        options = <div className='options'>\n            <button\n                onClick={() => socketRef.current.emit('newGame', roomName, mode)}\n                className='button-red'>Start game\n            </button>\n            <button\n                onClick={() => socketRef.current.emit('leaveRoom', roomName)}\n                className='button-red'>Back to menu\n            </button>\n        </div>\n    } else {\n        options = <div className='options center'>\n            <h1 className='title text-shadow'>Snake</h1>\n            <button\n                onClick={() => handleJoinRoom(socketRef.current.id, 'solo')}\n                className='button-red'>\n                Solo\n            </button>\n            <button\n                onClick={() => handleJoinRoom(socketRef.current.id, 'local2p')}\n                className='button-red'>\n                Local 2 players\n            </button>\n            <input type=\"text\" placeholder=\"Room name\" onChange={(e) => setRoomInput(e.target.value)} />\n            <button\n                onClick={() => handleJoinRoom(roomInput, 'room')}\n                className='button-red'>\n                Enter room\n            </button>\n        </div>\n    }\n    if (winner === 'Tie') {\n        gameResult = <h2 className='text-shadow'>The game ended with a tie!</h2>\n    } else if (winner) {\n        gameResult = <h2 className='text-shadow'>The last survivor is <span style={{ color: winner }}>{winner}</span></h2>\n    }\n\n    return (\n        <div className='snake-game'>\n            <div role=\"button\" tabIndex=\"0\" onKeyDown={handleKeyDown} {...swipeHandlers} className='snake-container'>\n                {currentSnakeColor}\n                {gameBoard}\n                <canvas style={roomName ? { display: 'block' } : { display: 'none' }}\n                    className='snake-canvas'\n                    ref={canvasRef}\n                    width={`${canvas.width}px`}\n                    height={`${canvas.height}px`}\n                />\n                {options}\n                {gameResult}\n                <Scores gameState={gameState} />\n            </div>\n        </div>\n    )\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();"],"sourceRoot":""}